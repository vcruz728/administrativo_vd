import{r as i,G as k,j as e,A as B}from"./app-CfIZwGwU.js";import{S as T}from"./react-select.esm-BSMfPm2J.js";import x from"./InputError-C7Q5PRis.js";import{E as j,l as A,D as _}from"./es-MX-LhFyKpEo.js";import{R as l,B as F,V as f}from"./index-BnXjDogV.js";import{S as I}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{T as R}from"./TituloCard-BgBytGn6.js";import{C as t}from"./Col-Qr9kuXVV.js";import{C as h}from"./Card-DKSS8lqU.js";import{F as G}from"./Form-BNoJLj0G.js";import"./floating-ui.dom-yjPBAgC-.js";import"./ElementChildren-DDLPNzr_.js";j.use(_);const Y=({id:s,directorio:g,externos:b,copias:C,tipo:N})=>{const o=i.useRef(null),[c,d]=i.useState({destinatario:0});i.useEffect(()=>{r("id",s)},[s]);const[S,m]=i.useState([]),{data:u,setData:r,errors:p,post:y,progress:L,reset:E,setDefaults:v}=k({id:s,tipo:N,destinatario:"",dirigido_a:""}),w=a=>{a.preventDefault(),y(route("saveCopiasOficio"),{preserveScroll:!0,onSuccess:D})},D=()=>{v({id:s,destinatario:"",dirigido_a:""}),E("dirigido_a"),o.current.clearValue(),f("Correcto: Se guardo una copia al oficio.",{style:{padding:"25px",color:"#fff",backgroundColor:"#29bf74"},position:"top-center"})},V=a=>{I.fire({title:"¿Está seguro?",text:"La información de la copia se eliminará permanentemente.",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar",customClass:{container:"swalSuperior"}}).then(n=>{n.isConfirmed&&B.delete(route("deleteCopiasOficio",{id:a}),{preserveScroll:!0,onSuccess:O=>{f("Correcto: Se elimino la copia del oficio.",{style:{padding:"25px",color:"#fff",backgroundColor:"#29bf74"},position:"top-center"})}})})};return e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[e.jsx(t,{xs:12,className:"mt-5",children:e.jsx(h.Header,{className:"d-flex justify-content-between",children:e.jsx(h.Title,{as:"h3",children:e.jsx(R,{titulo:"Copias",obligatorio:!0})})})}),e.jsx(t,{xs:12,sm:6,xl:4,className:"mb-4 mt-3",children:e.jsxs(G.Group,{children:[e.jsxs("label",{children:["Tipo de usuario ",e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsxs("div",{className:"custom-controls-stacked",children:[e.jsxs("label",{className:"custom-control custom-radio-md",children:[e.jsx("input",{type:"radio",className:"custom-control-input",name:"destinatario",defaultValue:"Interno",onChange:()=>{d({...c,destinatario:2}),r("destinatario","Interno"),o.current.clearValue(),m(g)},checked:u.destinatario=="Interno"}),e.jsx("span",{className:"custom-control-label",children:"Interno (BUAP)"})]}),e.jsxs("label",{className:"custom-control custom-radio-md",style:{marginLeft:"2rem"},children:[e.jsx("input",{type:"radio",className:"custom-control-input",name:"destinatario",defaultValue:"Externo",onChange:()=>{d({...c,destinatario:1}),r("destinatario","Externo"),o.current.clearValue(),m(b)},checked:u.destinatario=="Externo"}),e.jsx("span",{className:"custom-control-label",children:"Externo"})]}),e.jsx(x,{className:"mt-1",message:p.destinatario})]})]})})]}),e.jsx(l,{children:e.jsxs(t,{xs:12,sm:6,xl:4,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"directorio",children:["Dirigido a:",e.jsx("p",{className:"obligatorio",children:"*"})]}),e.jsx(T,{classNamePrefix:"Select",ref:o,options:S,name:"dirigido_a",placeholder:"Seleccione una opción",onChange:a=>{r("dirigido_a",a==null?void 0:a.value)}})]}),e.jsx(x,{className:"mt-1",message:p.dirigido_a})]})}),e.jsxs(l,{children:[e.jsx(t,{xs:12,className:"d-flex justify-content-end",children:e.jsx("button",{className:"btn btn-primary",onClick:w,children:"Guardar copia"})}),e.jsx(t,{md:12,className:"table-responsive",children:e.jsx(j,{data:C,options:{language:A,autoWidth:!1},columns:[{title:"Nombre",data:"nombre",width:"30%"},{title:"Cargo",data:"cargo",width:"30%"},{title:"Dependencia",data:"dependencia",width:"30%"},{data:"id",title:"Acciones",width:"10%"}],className:"display table-bordered  border-bottom ancho100",slots:{3:(a,n)=>e.jsx("div",{className:"text-center",children:e.jsx(F,{className:"btn-icon ml-1",variant:"danger",title:"Eliminar copia",onClick:()=>V(n.id),children:e.jsx("i",{className:"fa fa-trash"})})})}})})]})]})};export{Y as default};
