import{X as L,r as d,G as g,j as e,S as V,x as z,A as E}from"./app-DiRkOQ83.js";import{A as M,p as A}from"./pageHeader-Dqbf_v8i.js";/* empty css                     */import{V as T}from"./VerPdf-CDPESMWW.js";import{S as N}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import _ from"./InputError-B6pJpLUe.js";import{F as H,D as P}from"./react-datepicker-DR_MAEWE.js";import{R as y,B as i,V as I}from"./index-Cu_1jRMP.js";import{C as r}from"./Col-DIGkerQj.js";import{C as o}from"./Card-BT9HD5VF.js";import{F as t}from"./Form-BdXddw8I.js";import{M as $,a as G,b as q,c as K,d as O}from"./Modal--lSp9NW5.js";import"./commonimages-Cf9OJsbq.js";import"./CloseButton-W2BzVG0t.js";import"./floating-ui.dom-yjPBAgC-.js";import"./ElementChildren-DbVbxqJs.js";function de({status:U,oficio:a,archivos:b}){const x=L().props.auth.user,[v,m]=d.useState(!1),[C,h]=d.useState(!1),[w,p]=d.useState(""),[S,j]=d.useState("pdf"),u=g({id:a.id_respuesta,fecha:a.fecha_respuesta||H}),n=g({id:0,descripcion:""}),R=s=>{s.preventDefault(),N.fire({title:"¿Está seguro?",text:"Se notificará al colaborador para que vuelva a responder el oficio.",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar",customClass:{container:"swalSuperior"}}).then(l=>{l.isConfirmed?n.put(route("rechazarResp")):n.cancel()})},F=s=>{s.preventDefault(),u.post(route("oficios.cambiaFecha"),{onSuccess:l=>{I("Correcto: Se actualizo la fecha de respuesta del oficio.",{style:{padding:"25px",color:"#fff",backgroundColor:"#29bf74"},position:"top-center"})}})};function B(s){const[l,c,f]=s.split("-");return new Date(Number(l),Number(c)-1,Number(f))}const D=()=>{N.fire({title:"¿Está seguro?",text:"El oficio ya no se podrá editar y se marcará como finalizado",icon:"warning",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Sí, estoy seguro",denyButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&E.put(route("oficios.aceptResp",{id:a.id}))})},k=(s,l,c)=>{l==1?(p(s),m(!0),j(c)):window.open(s,"_blank")};return e.jsxs(M,{children:[e.jsxs(V,{children:[e.jsx("title",{children:"Revisión de respuesta del colaborador"}),e.jsx("meta",{name:"Revision de respuesta",content:"Revise la respuesta del oficio por parte de su colaborador"})]}),e.jsxs(d.Fragment,{children:[e.jsx(A,{titles:"Revisión de respuesta",active:"Revisión de respuesta",items:[{titulo:"Mis oficios",urlHeader:"/oficios/mis-oficios"}]}),e.jsxs(y,{children:[e.jsx(r,{lg:12,xl:6,children:e.jsxs(o,{children:[e.jsx(o.Header,{children:e.jsx(o.Title,{as:"h3",children:"Información del oficio"})}),e.jsxs(o.Body,{children:[e.jsx("div",{className:"form-row",children:e.jsx(r,{xl:4,md:6,className:"mb-4",children:e.jsxs(t.Group,{children:[e.jsx(t.Label,{children:"Ingreso de la solicitud"}),e.jsxs("div",{className:"custom-controls-stacked",children:[e.jsxs("label",{className:"custom-control custom-radio-md",children:[e.jsx("input",{type:"radio",className:"custom-control-input",name:"ingreso",defaultValue:"Físico",defaultChecked:a.ingreso=="Físico",disabled:!0}),e.jsx("span",{className:"custom-control-label",children:"Físico"})]}),e.jsxs("label",{className:"custom-control custom-radio-md",style:{marginLeft:"2rem"},children:[e.jsx("input",{type:"radio",className:"custom-control-input",name:"ingreso",defaultValue:"Email",defaultChecked:a.ingreso=="Email",disabled:!0}),e.jsx("span",{className:"custom-control-label",children:"Email"})]})]})]})})}),e.jsxs("div",{className:"form-row",children:[a.ingreso=="Físico"?e.jsxs(r,{xs:12,sm:6,xl:4,className:"mb-3",children:[e.jsx(t.Label,{children:"Número de oficio"}),e.jsx(t.Control,{name:"num_oficio",defaultValue:a.num_oficio,type:"text",disabled:!0})]}):null,a.ingreso=="Email"?e.jsxs(r,{xs:12,sm:6,xl:4,className:"mb-3",children:[e.jsx(t.Label,{children:"Número de folio"}),e.jsx(t.Control,{type:"text",disabled:!0,name:"num_folio",defaultValue:a.num_folio})]}):null,e.jsxs(r,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsx(t.Label,{children:"Dependencia o Unidad Académica"}),e.jsx(t.Control,{defaultValue:a.des,type:"text",disabled:!0})]}),e.jsxs(r,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsx(t.Label,{children:"Área para dar respuesta"}),e.jsx(t.Control,{defaultValue:a.area,type:"text",disabled:!0})]}),e.jsxs(r,{xs:12,sm:6,md:6,lg:6,xl:4,className:"mb-3",children:[e.jsx(t.Label,{children:"Proceso al que impacta"}),e.jsx(t.Control,{defaultValue:a.proceso,type:"text",disabled:!0})]}),e.jsx(r,{xs:12,sm:12,xl:8,style:{padding:40},children:e.jsxs("span",{className:"tag tag-radius tag-round tag-outline-danger",onClick:()=>{p(a.archivo),m(!0),j("pdf")},children:["Click para ver archivo",e.jsx("i",{className:"fa fa-file-pdf-o",style:{padding:6}})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx(t.Label,{children:"Breve descripción del asunto:"}),e.jsx("textarea",{className:"form-control",name:"descripcion",defaultValue:a.descripcion,rows:3,disabled:!0})]})]})]})}),e.jsx(r,{lg:12,xl:6,children:e.jsxs(o,{children:[e.jsx(o.Header,{children:e.jsx(o.Title,{as:"h3",children:"Respuesta del colaborador"})}),e.jsxs(o.Body,{children:[a.comentario!==null?e.jsxs(r,{xs:12,className:"mb-5",children:[e.jsx(t.Label,{children:"Breve descripción del rechazo por parte de recepción documental:"}),e.jsx("textarea",{className:"form-control",value:a.comentario,rows:3,disabled:!0})]}):null,e.jsx(r,{xs:12,style:{padding:40},children:e.jsxs("span",{className:"tag tag-radius tag-round tag-outline-danger",onClick:()=>{p(`imprime/pdf/0/${a.id}`),j("pdf"),m(!0)},children:["Click para ver archivo",e.jsx("i",{className:"fa fa-file-pdf-o",style:{padding:6}})]})}),b.length>0?e.jsxs(e.Fragment,{children:[e.jsx(r,{xs:12,children:e.jsxs("table",{className:"table table-bordered table-hover table-striped",children:[e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:2,children:"Archivos adjuntos"})}),e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Ver"})]})]}),e.jsx("tbody",{children:b.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.nombre}),e.jsx("td",{children:e.jsx(i,{className:"btn-icon ml-1",variant:"danger",title:"Ver PDF del oficio",onClick:()=>k(s.url,s.tipo,s.extension),children:e.jsx("i",{className:"fa fa-eye"})})})]},s.id))})]})}),e.jsx(r,{xs:12,className:"mb-5 d-flex justify-content-end",children:e.jsxs("a",{href:route("oficios.downloadFiles",{id:a.id}),target:"_BLANK",className:"btn btn-warning btn-lg mb-1",children:["Descargar todos los archivos adjuntos  ",e.jsx("i",{className:"fa fa-download"})]})})]}):null,x.rol==5?e.jsxs("form",{onSubmit:F,children:[e.jsxs(r,{xs:4,children:[e.jsx(t.Label,{children:"Seleccione la fecha de respuesta del oficio:"}),e.jsx(P,{className:"form-control",selected:u.data.fecha?B(u.data.fecha):null,onChange:s=>{if(s){const l=s.getFullYear(),c=String(s.getMonth()+1).padStart(2,"0"),f=String(s.getDate()).padStart(2,"0");u.setData("fecha",`${l}-${c}-${f}`)}},dateFormat:"yyyy-MM-dd"})]}),e.jsx(r,{xs:4,className:"mt-5",children:e.jsx(i,{className:"btn btn-success ",type:"submit",children:"Guardar fecha"})}),e.jsx(r,{xs:12,className:"mb-5"})]}):null,e.jsxs("div",{className:"form-row",children:[e.jsx(r,{xs:12,xl:6,xxl:4,className:"d-flex justify-content-center",children:e.jsx(i,{className:"btn-lg mb-1",variant:"success",onClick:D,children:x.rol==5?"Aceptar respuesta":"Autorizar respuesta"})}),e.jsx(r,{xs:12,xl:6,xxl:4,className:"d-flex justify-content-center",children:e.jsx(i,{className:"btn-lg mb-1",variant:"danger",onClick:()=>{h(!0),n.setData("id",a.id)},children:"Rechazar respuesta"})}),e.jsx(r,{xs:12,xl:12,xxl:4,className:"d-flex justify-content-center",children:e.jsx(z,{href:route("oficioResponder",{id:a.id}),className:"btn btn-primary btn-lg",children:x.rol==5?"Editar respuesta":"Responder oficio (Ignorando respuesta)"})})]})]})]})})]}),e.jsx(T,{urlPdf:w,show:v,setShow:m,tipo:S}),e.jsxs($,{show:C,onHide:()=>h(!1),children:[e.jsx(G,{children:e.jsx(q,{as:"h5",children:"Rechazar Respuesta de Oficio"})}),e.jsxs("form",{onSubmit:R,children:[e.jsx(K,{children:e.jsx(y,{children:e.jsxs(r,{xs:12,children:[e.jsx(t.Label,{children:"Breve descripción del motivo del rechazo:"}),e.jsx("textarea",{className:n.errors.descripcion?"form-control inputError":"form-control",name:"descripcion",value:n.data.descripcion,onChange:s=>n.setData("descripcion",s.target.value),placeholder:"Máximo 500 caracteres",rows:2}),e.jsx(_,{className:"mt-1",message:n.errors.descripcion})]})})}),e.jsxs(O,{children:[e.jsx(i,{variant:"secondary",onClick:()=>h(!1),children:"Cancelar"}),e.jsx(i,{variant:"primary",type:"submit",children:"Rechazar respuesta"})]})]})]})]})]})}export{de as default};
