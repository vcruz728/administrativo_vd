import{r as i,j as e,S as V,x as m}from"./app-CfIZwGwU.js";import{A as E,p as k}from"./pageHeader-Bkp2TYq1.js";/* empty css                     */import{$ as c,E as u,l as p,D}from"./es-MX-LhFyKpEo.js";import{L as _,J as P}from"./buttons.html5-B_9CvJJp.js";import{V as T}from"./VerPdf-CarIcMA9.js";import{R as A,B as o}from"./index-BnXjDogV.js";import{C as d}from"./Col-Qr9kuXVV.js";import{C as f}from"./Card-DKSS8lqU.js";import{T as F,a as h}from"./Tabs-Cg0F8UWU.js";import"./commonimages-B1RfzdlK.js";import"./CloseButton-Cfn6-q13.js";import"./ElementChildren-DDLPNzr_.js";window.JSZip=P;u.use(D);function Q({oficios:x,nuevoHistorico:j}){const[g,b]=i.useState(!1),[N,l]=i.useState(!1),[L,R]=i.useState(0),[s,n]=i.useState({urlPdf:"",extension:"",idOfico:0}),[v,y]=i.useState(),[w,C]=i.useState();return i.useEffect(()=>{y((x||[]).filter(t=>t.archivo_respuesta===null).map(t=>({...t}))),C((x||[]).filter(t=>t.archivo_respuesta!==null).map(t=>({...t})))},[x]),e.jsxs(E,{children:[e.jsxs(V,{children:[e.jsx("title",{children:"Listado de oficios"}),e.jsx("meta",{name:"listado de oficios",content:"Visualiza la lista de oficios ingresados a la VD"})]}),e.jsxs(i.Fragment,{children:[e.jsx(k,{titles:"Listado de oficios",active:"Listado de oficios",items:[]}),e.jsx(A,{children:e.jsx(d,{lg:12,md:12,children:e.jsxs(f,{children:[e.jsxs(f.Header,{className:"d-flex justify-content-between",children:[e.jsx(f.Title,{as:"h3",children:"Listado de oficios"}),e.jsxs("div",{className:"tags",children:[e.jsx("span",{className:"tag tag-radius tag-round tag-verde",children:"Se dio respuesta en tiempo"}),e.jsx("span",{className:"tag tag-radius tag-round tag-amarillo",children:"Sin respuesta, en tiempo"}),e.jsx("span",{className:"tag tag-radius tag-round tag-naranja",children:"Sin respuesta, fuera de tiempo"}),e.jsx("span",{className:"tag tag-radius tag-round tag-rojo",children:"Se dio respuesta fuera de tiempo"})]}),e.jsx("div",{className:"tags"})]}),e.jsx(f.Body,{children:e.jsx("div",{className:"panel panel-default",children:e.jsxs(F,{defaultActiveKey:"tab1",children:[e.jsxs(h,{eventKey:"tab1",title:"Activos",children:[e.jsx(d,{md:12,className:"d-flex justify-content-center",children:e.jsxs(m,{className:"btn btn-primary",href:route("oficios.recepcionOficio"),children:[e.jsx("i",{className:"fe fe-plus me-2"}),"Nueva recepción"]})}),e.jsxs(d,{md:12,className:"table-responsive",children:[e.jsx("div",{className:"mb-3 d-flex justify-content-end",children:e.jsx("button",{className:"btn btn-success",onClick:()=>{c("#activos-table").DataTable().button(".buttons-excel").trigger()},children:"Exportar a Excel"})}),e.jsx(u,{id:"activos-table",data:v,options:{language:p,order:[],buttons:[{extend:"excel",exportOptions:{columns:[1,2,3,4,5,6]}}]},columns:[{data:"id",title:"Estatus",createdCell(t,a,r,S,O){c(t).css("background",r.color),c(t).css("color",r.color)}},{data:"f_ingreso",title:"Fecha de ingreso"},{data:"ingreso",title:"Tipo de ingreso"},{data:"numero_oficio",title:"No. Oficio / Folio"},{data:"des",title:"Unidad Académica o Dependencia"},{data:"area",title:"Área responsable"},{data:"proceso",title:"Proceso que impacta"},{data:"proceso",title:"Acciones"},{data:"descripcion",title:"Descripción",visible:!1,searchable:!0}],className:"display table-bordered text-nowrap border-bottom",slots:{7:(t,a)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:"btn-icon btn btn-warning",href:route("oficios.modificaOficio",{id:a.id}),children:e.jsx("i",{className:"fe fe-edit"})}),e.jsx(o,{className:"btn-icon ml-1",variant:"success",onClick:()=>{n({...s,idOfico:a.id}),b(!0)},title:"Ver línea de tiempo del oficio",children:e.jsx("i",{className:"fa fa-history"})})]})})}})]})]}),e.jsx(h,{eventKey:"tab2",title:"Histórico",children:e.jsxs(d,{md:12,className:"table-responsive",children:[e.jsx("div",{className:"mb-3 d-flex justify-content-end",children:e.jsx("button",{className:"btn btn-success",onClick:()=>{c("#historico-table").DataTable().button(".buttons-excel").trigger()},children:"Exportar a Excel"})}),e.jsx(u,{id:"historico-table",data:w,options:{language:p,autoWidth:!1,buttons:[{extend:"excel",exportOptions:{columns:[1,2,3,4,5]}}]},columns:[{data:"id",title:"Estatus",createdCell(t,a,r,S,O){c(t).css("background",r.color),c(t).css("color",r.color)},width:"5%"},{data:"f_ingreso",title:"Fecha de ingreso",width:"10%"},{data:"numero_oficio",title:"No. Oficio / Folio",width:"5%"},{data:"area",title:"Área",width:"10%"},{data:"proceso",title:"Proceso",width:"10%"},{data:"descripcion",title:"Breve descripción",width:"40%"},{data:"proceso",width:"15%",title:"Acciones"},{data:"descripcion",title:"Descripción",visible:!1,searchable:!0},{data:"asunto",title:"Respuesta",visible:!1,searchable:!0}],className:"display table-bordered  border-bottom ancho100",slots:{6:(t,a)=>e.jsxs("div",{className:"text-center",children:[e.jsx(o,{className:"btn-icon btn btn-warning",variant:"danger",title:"Ver confirmación de recibido",onClick:()=>{n({...s,urlPdf:a.archivo_respuesta,extension:a.extension}),l(!0)},children:e.jsx("i",{className:"fa fa-file-pdf-o"})}),e.jsx(o,{className:"btn-icon btn btn-warning ml-1",variant:"danger",title:"Ver respuesta al oficio",onClick:()=>{n({...s,urlPdf:a.oficio_final,extension:"pdf"}),l(!0)},children:e.jsx("i",{className:"fa fa-file-pdf-o"})}),e.jsx(o,{className:"btn-icon ml-1",variant:"danger",title:"Ver PDF del oficio",onClick:()=>{n({...s,urlPdf:a.archivo,extension:"pdf"}),l(!0)},children:e.jsx("i",{className:"fa fa-eye"})}),e.jsx(o,{className:"btn-icon ml-1",variant:"success",onClick:()=>{n({...s,idOfico:a.id}),b(!0)},title:"Ver línea de tiempo del oficio",children:e.jsx("i",{className:"fa fa-history"})})]})}})]})}),e.jsx(h,{eventKey:"tab5",title:"Oficios VD Histórico",children:e.jsxs(d,{md:12,className:"table-responsive",children:[e.jsx("div",{className:"mb-3 d-flex justify-content-end",children:e.jsx("button",{className:"btn btn-success",onClick:()=>{c("#historicoVd-table").DataTable().button(".buttons-excel").trigger()},children:"Exportar a Excel"})}),e.jsx(u,{data:j,options:{language:p,autoWidth:!1,buttons:[{extend:"excel",exportOptions:{columns:[1,2,3]}}]},id:"historicoVd-table",columns:[{data:"f_ingreso",title:"Fecha de creación",width:"10%"},{data:"oficio_respuesta",title:"Num Folio/Oficio",width:"10%"},{data:"area",title:"Área",width:"10%"},{data:"nombre_desti",title:"Destinatario",width:"10%"},{data:"id",width:"15%",title:"Acciones"},{data:"respuesta",title:"Respuesta",visible:!1,searchable:!0}],className:"display table-bordered  border-bottom ancho100",slots:{4:(t,a)=>e.jsxs("div",{className:"text-center",children:[a.masivo==1?e.jsx(o,{className:"btn-icon btn btn-warning mr-1",variant:"danger",title:"Ver confirmación de recibido",onClick:()=>{n({...s,urlPdf:a.archivo_respuesta,extension:a.extension}),l(!0)},children:e.jsx("i",{className:"fa fa-file-pdf-o"})}):e.jsx(m,{href:route("oficios.confirmaRecibidosNuevos",{id:a.id}),children:e.jsxs(o,{className:"btn-icon btn btn-warning mr-1",variant:"warning",title:"Confirmaciones de recibido",children:[e.jsx("i",{className:"fa fa-handshake-o"})," "]})}),e.jsx(m,{href:route("oficios.detalleNuevo",{id:a.id}),children:e.jsx(o,{className:"btn-icon ",variant:"danger",title:"Ver detalle del oficio",children:e.jsx("i",{className:"fa fa-eye"})})})]})}})]})})]})})})]})})}),e.jsx(_,{showLinea:g,setShowLinea:b,id:s.idOfico}),e.jsx(T,{urlPdf:s.urlPdf,show:N,tipo:s.extension,setShow:l})]})]})}export{Q as default};
